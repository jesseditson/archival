# A github action for building archival sites and publishing them to a branch.
name: Build & Publish Archival Site
author: "Archival Team"
inputs:
  branch:
    description: "branch to write output to"
    required: false
    default: "archival-dist"
runs:
  using: "composite"
  steps:
    - name: Checkout
      uses: actions/checkout@v4
    - name: Setup Node
      uses: actions/setup-node@v4
    - name: Archival Prebuild
      run: bin/archival prebuild
      shell: bash
    - name: Build with Archival
      run: bin/archival build
      shell: bash
    - name: Upload artifact
      uses: actions/upload-pages-artifact@v3
      with:
        path: "./$(bin/archival manifest build-dir)"
